class AssertionError extends Error{constructor(e){var t;super(null!==(t="Assertion failed"+(e?": ":"")+e)&&void 0!==t?t:"")}}function assert(e,t=""){if(!e)throw new AssertionError(t)}const throws=e=>{throw e},toast=function(){const e=document.createElement("div");window.addEventListener("load",(()=>document.body.appendChild(e)));const t=e.attachShadow({mode:"closed"});t.appendChild(Object.assign(document.createElement("style"),{textContent:"\n            :host {\n                position: fixed;\n                top: 0;\n                left: 0;\n                height: 100%;\n                width: 100%;\n                display: flex;\n                justify-content: center;\n                font-family: Arial;\n                pointer-events: none;\n            }\n            :host>span {\n                transition: opacity 0.15s linear;\n                align-self: flex-end;\n                margin-bottom: 2em;\n                border-radius: 3ch;\n                z-index: 99999;\n                color: #444;\n                background-color: rgb(245 245 245 / 85%);\n                box-shadow:0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12);\n                padding: 1.5ch 2ch;\n                pointer-events: none;\n                user-select: none;\n                opacity: 0;\n            }\n            :host>span>span {\n                --max-lines: 4;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: var(--max-lines);\n                -webkit-box-orient: vertical;\n                max-width: 20ch;\n            }\n        "}));const n=document.createElement("span"),r=document.createElement("span");n.appendChild(r),t.appendChild(n);const o={short:1e3,medium:2e3,long:5e3},a=[];let i=-1;return function(e,t="short"){return new Promise((function(s){window.requestAnimationFrame((async function(){await Promise.all(a),clearTimeout(i),a.push(new Promise((function(c){r.textContent=e,n.style.opacity="1.0",setTimeout((function(){n.style.opacity="0.0",i=setTimeout((function(){r.textContent="",s()}),250),a.shift(),c()}),o[t]+250)})))}))}))}}(),chime=function(){function e(e){return new Promise((t=>setTimeout(t,e)))}const t=new AudioContext,n=Array.apply(null,{length:9}).map((e=>({})));return n[0].A=27.5,n[0]["A#"]=29.13523509488062,n[0].B=30.867706328507754,n[1].C=32.70319566257483,n[1]["C#"]=34.64782887210901,n[1].D=36.70809598967595,n[1]["D#"]=38.890872965260115,n[1].E=41.20344461410874,n[1].F=43.653528929125486,n[1]["F#"]=46.2493028389543,n[1].G=48.99942949771866,n[1]["G#"]=51.91308719749314,n[1].A=55,n[1]["A#"]=58.27047018976124,n[1].B=61.735412657015516,n[2].C=65.40639132514966,n[2]["C#"]=69.29565774421802,n[2].D=73.4161919793519,n[2]["D#"]=77.78174593052023,n[2].E=82.40688922821748,n[2].F=87.30705785825097,n[2]["F#"]=92.4986056779086,n[2].G=97.99885899543732,n[2]["G#"]=103.82617439498628,n[2].A=110,n[2]["A#"]=116.54094037952248,n[2].B=123.47082531403103,n[3].C=130.8127826502993,n[3]["C#"]=138.59131548843604,n[3].D=146.8323839587038,n[3]["D#"]=155.56349186104046,n[3].E=164.81377845643496,n[3].F=174.61411571650194,n[3]["F#"]=184.9972113558172,n[3].G=195.99771799087463,n[3]["G#"]=207.65234878997256,n[3].A=220,n[3]["A#"]=233.08188075904496,n[3].B=246.94165062806206,n[4].C=261.6255653005986,n[4]["C#"]=277.1826309768721,n[4].D=293.6647679174076,n[4]["D#"]=311.1269837220809,n[4].E=329.6275569128699,n[4].F=349.2282314330039,n[4]["F#"]=369.9944227116344,n[4].G=391.99543598174927,n[4]["G#"]=415.3046975799451,n[4].A=440,n[4]["A#"]=466.1637615180899,n[4].B=493.8833012561241,n[5].C=523.2511306011972,n[5]["C#"]=554.3652619537442,n[5].D=587.3295358348151,n[5]["D#"]=622.2539674441618,n[5].E=659.2551138257398,n[5].F=698.4564628660078,n[5]["F#"]=739.9888454232688,n[5].G=783.9908719634985,n[5]["G#"]=830.6093951598903,n[5].A=880,n[5]["A#"]=932.3275230361799,n[5].B=987.7666025122483,n[6].C=1046.5022612023945,n[6]["C#"]=1108.7305239074883,n[6].D=1174.6590716696303,n[6]["D#"]=1244.5079348883237,n[6].E=1318.5102276514797,n[6].F=1396.9129257320155,n[6]["F#"]=1479.9776908465376,n[6].G=1567.981743926997,n[6]["G#"]=1661.2187903197805,n[6].A=1760,n[6]["A#"]=1864.6550460723597,n[6].B=1975.5332050244965,n[7].C=2093.004522404789,n[7]["C#"]=2217.4610478149766,n[7].D=2349.3181433392606,n[7]["D#"]=2489.0158697766474,n[7].E=2637.0204553029594,n[7].F=2793.825851464031,n[7]["F#"]=2959.955381693075,n[7].G=3135.963487853994,n[7]["G#"]=3322.437580639561,n[7].A=3520,n[7]["A#"]=3729.3100921447194,n[7].B=3951.066410048993,n[8].C=4186.009044809578,async function(r="440 880 1200",{fadeOutTime:o=.5,defaultNoteTime:a=.2}={}){const i=r.split(/[,\s]+/g).map((function(e){var t;const[r,o]=e.split(":");let i=parseFloat(r);if(Number.isNaN(i)){const[e,o]=r.split(/(?=\d)/);i=null!==(t=n[+o][e.toUpperCase()])&&void 0!==t?t:0}return[i,+(null!=o?o:a)]})),s=t.createGain();s.connect(t.destination);const c=t.createOscillator();c.connect(s),c.type="sine",c.start(),c.frequency.setValueAtTime(0,t.currentTime),s.gain.setValueAtTime(.001,t.currentTime),s.gain.exponentialRampToValueAtTime(.5,t.currentTime+.02);for(const[n,r]of i)c.frequency.setValueAtTime(+n,t.currentTime),await e(Math.max(1e3*r-10,0));s.gain.setTargetAtTime(.001,t.currentTime+o-.05-.04,.02),c.stop(t.currentTime+o),await e(1e3*o)}}();class Keybinds{constructor(e=window){this.target=e,this.levels=Array.apply(null,{length:5}).map((e=>new Map)),this.onEvent=function(e){var t;if(Keybinds.COMMAND_KEYS.includes(e.key.toLowerCase()))return;const n=+e.ctrlKey+ +e.shiftKey+ +e.altKey+ +e.metaKey,r=null===(t=[...this.levels[n].entries()].find((function([t]){return(!t.ctrlKey||e.ctrlKey)&&(!t.shiftKey||e.shiftKey)&&(!t.altKey||e.altKey)&&(!t.metaKey||e.metaKey)&&t.char===e.key.replace(/^ $/,"Space").toLowerCase()})))||void 0===t?void 0:t[1];r&&(e.preventDefault(),r())}.bind(this),e.addEventListener("keydown",this.onEvent)}static on(e,t){return Keybinds.DEFAULT_INSTANCE.on(e,t)}on(e,t){var n;const r=e.split(/\s+[+,]?\s?/).map((e=>e.toLowerCase().replaceAll(/^ctrl$/g,Keybinds.CommandKeys.Control)));this.levels[Math.min(r.length-1,4)].set({ctrlKey:r.includes(Keybinds.CommandKeys.Control),shiftKey:r.includes(Keybinds.CommandKeys.Shift),altKey:r.includes(Keybinds.CommandKeys.Alt),metaKey:r.includes(Keybinds.CommandKeys.Meta)||r.includes(Keybinds.CommandKeys.Windows),char:null!==(n=r.find((e=>!Keybinds.COMMAND_KEYS_ARRAY.includes(e))))&&void 0!==n?n:(()=>{throw new Error(`Keybind '${e}' must contain a none command key`)})()},t)}detach(){this.target.removeEventListener("keydown",this.onEvent)}}Keybinds.CommandKeys=function(){let e;return function(e){e.Control="control",e.Shift="shift",e.Alt="alt",e.Meta="meta",e.Windows="windows"}(e||(e={})),e}(),Keybinds.DEFAULT_INSTANCE=new Keybinds,Keybinds.COMMAND_KEYS_ARRAY=Object.values(Keybinds.CommandKeys).filter((e=>"string"==typeof e)),Keybinds.COMMAND_KEYS=Keybinds.COMMAND_KEYS_ARRAY.filter((e=>e!=Keybinds.CommandKeys.Windows));class Random{static splitSeed(e,t=1,n=32){const r=[],o=BigInt(n);for(let a=0;a<t;a++)r.push(Number(BigInt.asIntN(n,e))),e>>=o;return r}constructor({seed:e=BigInt(+new Date),type:t="xoroshiro128plus_32"}={}){this.random=Random.IMPLEMENTATIONS[t](e)}}var Base64,LZCompression,LZWCompression,GZipCompression,AESGCMEncryption,ConfigString,CSV,JSION,SHML,DomLib;Random.IMPLEMENTATIONS={fast(e){let[t]=Random.splitSeed(e,1,53);return function(){const e=1e4*Math.sin(t++);return e-Math.floor(e)}},mwc(e){let[t,n]=Random.splitSeed(e,2,16);return function(){return t=36969*(65535&t)+(t>>>16),n=18e3*(65535&n)+(n>>>16),((t<<16)+(65535&n)>>>0)/4294967296}},xorshift32(e){let[t]=Random.splitSeed(e);return function(){return t^=t<<13,t^=t>>>17,t^=t<<5,(t>>>0)/4294967296}},xorshift128(e){let[t,n,r,o]=Random.splitSeed(e,4);return function(){var e=t^t<<11;return t=n,n=r,r=o,o=o^o>>>19^e^e>>>8,(o>>>0)/4294967296}},xorwow(e){let[t,n,r,o,a,i]=Random.splitSeed(e,6);return function(){var e=t^t>>>2;return t=n,n=r,r=o,o=a,a=a^a<<4^e^e<<1,i=i+362437>>>0,(a+i>>>0)/4294967296}},xorshift32m(e){let[t]=Random.splitSeed(e);return function(){return t^=t<<13,t^=t>>>17,t^=t<<5,(Math.imul(t,1597334677)>>>0)/4294967296}},xorshift32amx(e){let[t]=Random.splitSeed(e);return function(){var e=Math.imul(t,1597334677);return t^=t<<13,t^=t>>>17,t^=t<<5,(t+(e=e>>>24|e>>>8&65280|e<<8&16711680|e<<24)>>>0)/4294967296}},xoroshiro64ss(e){let[t,n]=Random.splitSeed(e,2);return function(){var e=Math.imul(t,2654435771);return n^=t,t=n^(t<<26|t>>>6)^n<<9,n=n<<13|n>>>19,((e=5*(e<<5|e>>>27))>>>0)/4294967296}},xoroshiro64s(e){let[t,n]=Random.splitSeed(e,2);return function(){var e=Math.imul(t,2654435771);return n^=t,t=n^(t<<26|t>>>6)^n<<9,n=n<<13|n>>>19,(e>>>0)/4294967296}},xoroshiro64p(e){let[t,n]=Random.splitSeed(e,2);return function(){var e=t+n;return n^=t,t=n^(t<<26|t>>>6)^n<<9,n=n<<13|n>>>19,(e>>>0)/4294967296}},xoroshiro128plus_32(e){let[t,n,r,o]=Random.splitSeed(e,4);const a=function(){var e,a=t>>>0,i=n>>>0,s=r>>>0,c=o>>>0;return e=c+i+(0!==s&&a>=-s>>>0?1:0),t=(i<<23|a>>>9)^(s^=a)^s<<14,n=(a<<23|i>>>9)^(c^=i)^(c<<14|s>>>18),r=c<<4|s>>>28,o=s<<4|c>>>28,(e>>>0)/4294967296};for(var i=0;i<10;i++)a();return a},xorshift128plus_32b(e){let[t,n,r,o]=Random.splitSeed(e,4);const a=function(){var e,a=t>>>0,i=n>>>0,s=r>>>0,c=o>>>0;return e=c+i+(0!==a&&s>=-a>>>0?1:0),i^=i<<23|a>>>9,t=s,n=c,r=(a^=a<<23)^s^(a>>>18|i<<14)^(s>>>5|c<<27),o=i^c^i>>>18^c>>>5,(e>>>0)/4294967296};for(var i=0;i<20;i++)a();return a},xoshiro128ss(e){let[t,n,r,o]=Random.splitSeed(e,4);return function(){var e=n<<9,a=5*t;return r^=t,o^=n,n^=r,t^=o,r^=e,o=o<<11|o>>>21,((a=9*(a<<7|a>>>25))>>>0)/4294967296}},xoshiro128pp(e){let[t,n,r,o]=Random.splitSeed(e,4);return function(){var e=n<<9,a=t+o;return a=(a<<7|a>>>25)+t,r^=t,o^=n,n^=r,t^=o,r^=e,o=o<<11|o>>>21,(a>>>0)/4294967296}},xoshiro128p(e){let[t,n,r,o]=Random.splitSeed(e,4);return function(){var e=n<<9,a=t+o;return r^=t,o^=n,n^=r,t^=o,r^=e,o=o<<11|o>>>21,(a>>>0)/4294967296}},jsf32(e){let[t,n,r,o]=Random.splitSeed(e,4);const a=function(){t|=0,n|=0,r|=0,o|=0;var e=t-(n<<27|n>>>5)|0;return t=n^(r<<17|r>>>15),n=r+o|0,r=o+e|0,o=t+e|0,(o>>>0)/4294967296};for(var i=0;i<20;i++)a();return a},jsf32b(e){let[t,n,r,o]=Random.splitSeed(e,4);const a=function(){t|=0,n|=0,r|=0,o|=0;var e=t-(n<<23|n>>>9)|0;return t=n^(r<<16|r>>>16)|0,n=r+(o<<11|o>>>21)|0,n=r+o|0,r=o+e|0,o=t+e|0,(o>>>0)/4294967296};for(var i=0;i<20;i++)a();return a},gjrand32(e){let[t,n,r,o]=Random.splitSeed(e,4);const a=function(){return t|=0,n|=0,r|=0,o|=0,t=t<<16|t>>>16,n=n+r|0,t=t+n|0,r^=n,r=r<<11|r>>>21,n^=t,t=t+r|0,n=r<<19|r>>>13,r=r+t|0,o=o+38565|0,n=n+o|0,(t>>>0)/4294967296};for(var i=0;i<14;i++)a();return a},sfc32(e){let[t,n,r,o]=Random.splitSeed(e,4);const a=function(){t|=0,n|=0,r|=0,o|=0;var e=(t+n|0)+o|0;return o=o+1|0,t=n^n>>>9,n=r+(r<<3)|0,r=r<<21|r>>>11,r=r+e|0,(e>>>0)/4294967296};for(var i=0;i<15;i++)a();return a},tychei(e){let[t,n,r,o]=Random.splitSeed(e,4);return function(){return t|=0,n|=0,r|=0,o|=0,n=(n<<25|n>>>7)^r,r=r-o|0,o=(o<<24|o>>>8)^t,t=t-n|0,n=(n<<20|n>>>12)^r,r=r-o|0,o=(o<<16|o>>>16)^t,t=t-n|0,(t>>>0)/4294967296}},tyche(e){let[t,n,r,o]=Random.splitSeed(e,4);return function(){return t|=0,n|=0,r|=0,o|=0,t=t+n|0,o^=t,o=o<<16|o>>>16,r=r+o|0,n^=r,n=n<<12|n>>>20,t=t+n|0,o^=t,o=o<<8|o>>>24,r=r+o|0,n^=r,n=n<<7|n>>>25,(n>>>0)/4294967296}},mulberry32(e){let[t]=Random.splitSeed(e);return function(){t|=0,t=t+1831565813|0;var e=Math.imul(t^t>>>15,1|t);return(((e=e+Math.imul(e^e>>>7,61|e)^e)^e>>>14)>>>0)/4294967296}},splitmix32(e){let[t]=Random.splitSeed(e);return function(){t|=0,t=t+2654435769|0;var e=t^t>>>15;return e=Math.imul(e,2246822507),e^=e>>>13,e=Math.imul(e,3266489909),((e^=e>>>16)>>>0)/4294967296}},v3b(e){let[t,n,r,o]=Random.splitSeed(e,4);var a,i=0,s=0,c=n,l=r,u=o;const p=function(){switch(0===i&&(t+=o,t=t<<21|t>>>11,n=(n<<12|n>>>20)+r,r^=t,o^=n,t+=o,t=t<<19|t>>>13,n=(n<<24|n>>>8)+r,r^=t,o^=n,t+=o,t=t<<7|t>>>25,n=(n<<12|n>>>20)+r,r^=t,o^=n,t+=o,t=t<<27|t>>>5,n=(n<<17|n>>>15)+r,r^=t,o^=n,t+=s,n+=c,r+=l,o+=u,s++,i=4),--i){case 0:a=t;break;case 1:a=n;break;case 2:a=r;break;case 3:a=o}return(a>>>0)/4294967296};for(var d=0;d<16;d++)p();return p}},function(e){function t(e,t){const n=e.replace(/[^A-Za-z0-9+/]/g,""),r=n.length,o=t?Math.ceil((3*r+1>>2)/t)*t:3*r+1>>2,a=new Uint8Array(o);let i,s,c=0,l=0;for(let e=0;e<r;e++)if(s=3&e,c|=((u=n.charCodeAt(e))>64&&u<91?u-65:u>96&&u<123?u-71:u>47&&u<58?u+4:43===u?62:47===u?63:0)<<6*(3-s),3===s||r-e==1){for(i=0;i<3&&l<o;)a[l]=c>>>(16>>>i&24)&255,i++,l++;c=0}var u;return a}function n(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function r(e){let t=2,r="";const o=e.length;let a=0;for(let i=0;i<o;i++)t=i%3,i>0&&4*i/3%76==0&&(r+="\r\n"),a|=e[i]<<(16>>>t&24),2!==t&&e.length-i!=1||(r+=String.fromCodePoint(n(a>>>18&63),n(a>>>12&63),n(a>>>6&63),n(63&a)),a=0);return r.substr(0,r.length-2+t)+(2===t?"":1===t?"=":"==")}e.decodeBase64ToArray=t,e.encode=function(e){return r((new TextEncoder).encode(e))},e.decode=function(e){return(new TextDecoder).decode(t(e))},e.encodeBase64FromArray=r}(Base64||(Base64={})),function(e){const t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function a(e,t){if(!o[e]){o[e]={};for(let t=0;t<e.length;t++)o[e][e.charAt(t)]=t}return o[e][t]}function i(e){return s(e,16,(function(e){return t(e)}))}function s(e,t,n){if(null==e)return"";let r,o,a={},i={},s="",c="",l="",u=2,p=3,d=2,f=[],g=0,h=0;for(let m=0;m<e.length;m+=1)if(s=e.charAt(m),Object.prototype.hasOwnProperty.call(a,s)||(a[s]=p++,i[s]=!0),c=l+s,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(i,l)){if(l.charCodeAt(0)<256){for(r=0;r<d;r++)g<<=1,h==t-1?(h=0,f.push(n(g)),g=0):h++;for(o=l.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,h==t-1?(h=0,f.push(n(g)),g=0):h++,o>>=1}else{for(o=1,r=0;r<d;r++)g=g<<1|o,h==t-1?(h=0,f.push(n(g)),g=0):h++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,h==t-1?(h=0,f.push(n(g)),g=0):h++,o>>=1}u--,0==u&&(u=Math.pow(2,d),d++),delete i[l]}else for(o=a[l],r=0;r<d;r++)g=g<<1|1&o,h==t-1?(h=0,f.push(n(g)),g=0):h++,o>>=1;u--,0==u&&(u=Math.pow(2,d),d++),a[c]=p++,l=String(s)}if(""!==l){if(Object.prototype.hasOwnProperty.call(i,l)){if(l.charCodeAt(0)<256){for(r=0;r<d;r++)g<<=1,h==t-1?(h=0,f.push(n(g)),g=0):h++;for(o=l.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,h==t-1?(h=0,f.push(n(g)),g=0):h++,o>>=1}else{for(o=1,r=0;r<d;r++)g=g<<1|o,h==t-1?(h=0,f.push(n(g)),g=0):h++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,h==t-1?(h=0,f.push(n(g)),g=0):h++,o>>=1}u--,0==u&&(u=Math.pow(2,d),d++),delete i[l]}else for(o=a[l],r=0;r<d;r++)g=g<<1|1&o,h==t-1?(h=0,f.push(n(g)),g=0):h++,o>>=1;u--,0==u&&(u=Math.pow(2,d),d++)}for(o=2,r=0;r<d;r++)g=g<<1|1&o,h==t-1?(h=0,f.push(n(g)),g=0):h++,o>>=1;for(;;){if(g<<=1,h==t-1){f.push(n(g));break}h++}return f.join("")}function c(e){return null==e?"":""==e?null:l(e.length,32768,(function(t){return e.charCodeAt(t)}))}function l(e,n,r){let o,a,i,s,c,l,u,p,d=[],f=4,g=4,h=3,m="",v=[],w={val:r(0),position:n,index:1};for(a=0;a<3;a+=1)d[a]=a;for(s=0,l=Math.pow(2,2),u=1;u!=l;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=r(w.index++)),s|=(c>0?1:0)*u,u<<=1;switch(o=s){case 0:for(s=0,l=Math.pow(2,8),u=1;u!=l;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=r(w.index++)),s|=(c>0?1:0)*u,u<<=1;p=t(s);break;case 1:for(s=0,l=Math.pow(2,16),u=1;u!=l;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=r(w.index++)),s|=(c>0?1:0)*u,u<<=1;p=t(s);break;case 2:return""}for(d[3]=p,i=p,v.push(p);;){if(w.index>e)return"";for(s=0,l=Math.pow(2,h),u=1;u!=l;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=r(w.index++)),s|=(c>0?1:0)*u,u<<=1;switch(p=s){case 0:for(s=0,l=Math.pow(2,8),u=1;u!=l;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=r(w.index++)),s|=(c>0?1:0)*u,u<<=1;d[g++]=t(s),p=g-1,f--;break;case 1:for(s=0,l=Math.pow(2,16),u=1;u!=l;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=r(w.index++)),s|=(c>0?1:0)*u,u<<=1;d[g++]=t(s),p=g-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,h),h++),d[p])m=d[p];else{if(p!==g)return null;m=i+i.charAt(0)}v.push(m),d[g++]=i+m.charAt(0),f--,i=m,0==f&&(f=Math.pow(2,h),h++)}}e.compressToBase64=function(e){if(null==e)return"";const t=s(e,6,(function(e){return n.charAt(e)}));switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},e.decompressFromBase64=function(e){return null==e?"":""==e?null:l(e.length,32,(function(t){return a(n,e.charAt(t))}))},e.compressToUTF16=function(e){return null==e?"":s(e,15,(function(e){return t(e+32)}))+" "},e.decompressFromUTF16=function(e){return null==e?"":""==e?null:l(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},e.compressToUint8Array=function(e){const t=i(e),n=new Uint8Array(2*t.length);for(let e=0,r=t.length;e<r;e++){const r=t.charCodeAt(e);n[2*e]=r>>>8,n[2*e+1]=r%256}return n},e.decompressFromUint8Array=function(e){if(null==e)return c(e);{const n=new Array(e.length/2);for(let t=0,r=n.length;t<r;t++)n[t]=256*e[2*t]+e[2*t+1];const r=[];return n.forEach((function(e){r.push(t(e))})),c(r.join(""))}},e.compressToEncodedURIComponent=function(e){return null==e?"":s(e,6,(function(e){return r.charAt(e)}))},e.decompressFromEncodedURIComponent=function(e){return null==e?"":""==e?null:l((e=e.replace(/ /g,"+")).length,32,(function(t){return a(r,e.charAt(t))}))},e.compress=i,e.decompress=c,e.zip=i,e.unzip=c}(LZCompression||(LZCompression={})),function(e){function t(e){try{const n={},r=(e+"").split(""),o=[];let a,i=r[0],s=256;for(let e=1;e<r.length;e++)a=r[e],null!=n[i+a]?i+=a:(o.push(i.length>1?n[i]:i.charCodeAt(0)),n[i+a]=s,s++,i=a);o.push(i.length>1?n[i]:i.charCodeAt(0));for(var t=0;t<o.length;t++)o[t]=String.fromCharCode(o[t]);return function(e){return btoa(unescape(encodeURIComponent(e)))}(o.join(""))}catch(e){throw"Failed to zip string"}}function n(e){try{const t=decodeURIComponent(escape(atob(e))),n={},r=(t+"").split("");let o=r[0],a=o;const i=[o];let s,c=256;for(let e=1;e<r.length;e++){let t=r[e].charCodeAt(0);s=t<256?r[e]:n[t]?n[t]:a+o,i.push(s),o=s.charAt(0),n[c]=a+o,c++,a=s}return i.join("")}catch(e){throw"Failed to unzip string"}}e.compress=t,e.decompress=n,e.zip=t,e.unzip=n}(LZWCompression||(LZWCompression={})),function(e){async function t(t){return Base64.encodeBase64FromArray(new Uint8Array(await(await e.compressBlob(new Blob([t]))).arrayBuffer()))}async function n(t){return(await e.decompressBlob(new Blob([Base64.decodeBase64ToArray(t)]))).text()}e.decompressBlob=async function(e){const t=new DecompressionStream("gzip"),n=e.stream().pipeThrough(t);return new Blob([await new Response(n).blob()])},e.compressBlob=async function(e){const t=new CompressionStream("gzip"),n=e.stream().pipeThrough(t);return new Blob([await new Response(n).blob()],{type:"application/gzip"})},e.compress=t,e.decompress=n,e.zip=t,e.unzip=n}(GZipCompression||(GZipCompression={})),function(e){e.encrypt=async function(e,t){const n=(new TextEncoder).encode(t),r=await crypto.subtle.digest("SHA-256",n),o=crypto.getRandomValues(new Uint8Array(12)),a={name:"AES-GCM",iv:o},i=await crypto.subtle.importKey("raw",r,a,!1,["encrypt"]),s=(new TextEncoder).encode(e),c=await crypto.subtle.encrypt(a,i,s),l=Array.from(new Uint8Array(c)).map((e=>String.fromCharCode(e))).join(""),u=btoa(l);return Array.from(o).map((e=>("00"+e.toString(16)).slice(-2))).join("")+u},e.decrypt=async function(e,t){const n=(new TextEncoder).encode(t),r=await crypto.subtle.digest("SHA-256",n),o=e.slice(0,24).match(/.{2}/g).map((e=>parseInt(e,16))),a={name:"AES-GCM",iv:new Uint8Array(o)},i=await crypto.subtle.importKey("raw",r,a,!1,["decrypt"]),s=atob(e.slice(24)),c=new Uint8Array(s.match(/[\s\S]/g).map((e=>e.charCodeAt(0)))),l=await crypto.subtle.decrypt(a,i,c);return(new TextDecoder).decode(l)}}(AESGCMEncryption||(AESGCMEncryption={})),function(e){const t="%=;".split("").map((e=>[e,encodeURIComponent(e)])),n=[...t].reverse();function r(e){for(const[n,r]of t)e=e.replaceAll(n,r);return e}function o(e){for(const[t,r]of n)e=e.replaceAll(r,t);return e}e.parse=function(e){function t(e){const t=e.toLowerCase();return"false"!==t&&("true"===t||("null"===t||""===e?null:e.match(/^\d+(?:\.\d+)?$/)?+e:e.replace(/^"([\s\S]*)"$/,"$1")))}return Object.fromEntries(e.split(";").filter((e=>e.trim())).map((function(e){const[n,r]=e.split("=");return[o(n.trim()),t(o(r.trim()))]})))},e.stringify=function(e){return Object.entries(e).map((([e,t])=>`${r(e)}=${r(function(e){return!1===e?"false":!0===e?"true":null===e?"null":"number"==typeof e?e.toString():e.replace(/^(?:true|false|null|"[\s\S]*"|\d+(?:\.\d+)?||(?:(?: [\s\S]*?)|(?:[\s\S]*? )))$/,'"$&"')}(t))}`)).join(";")}}(ConfigString||(ConfigString={})),function(e){function t(e){if(1!==e.length)throw new Error("CSV delimiter must be exactly one character (code unit) long")}function n(e){return e.replace(/[.*+?^${}()|[\]\\\-]/g,String.raw`\$&`)}e.stringify=function(e,r,{header:o=!0,delimiter:a=","}={}){t(a);const i=new RegExp(String.raw`[\n${n(a)}"]`);function s([e,t]){const n=`${r?r(e,t):t}`;return i.test(n)?`"${n.replaceAll('"','""')}"`:n}function c(e){return e.map(s).join(a)}return(o?`${c(Object.keys(e[0]).map((e=>[null,e])))}\n`:"")+e.map((e=>c(Object.entries(e)))).join("\n")},e.parse=function(e,r,{header:o=!0,delimiter:a=","}={}){var i;t(a);const s=n(a),c=new RegExp(String.raw`(${s}|\r?\n|\r|^)(?:"((?:\\.|""|[^\\"])*)"|([^${s}"\r\n]*))`,"gi"),l=[[]];let u=null;for(;u=c.exec(e);)u[1].length&&u[1]!==a&&l.push([]),l.at(-1).push(u[2]?u[2].replace(/[\\"](.)/g,"$1"):null!==(i=u[3])&&void 0!==i?i:"");if(!o||!l.length)return l.map(((e,t)=>r?r(t.toString(),e):e));const p=l.shift().map((e=>r?r(null,e):e));return l.map((e=>Object.fromEntries(e.map(((e,t)=>[p[t],r?r(p[t],e):e])))))},e.fromCammelCase=function(e){return e[0].toUpperCase()+e.slice(1).replace(/[A-Z]/," $&")},e.toCammelCase=function(e){return e[0].toLowerCase()+e.slice(1).replaceAll(" ","")}}(CSV||(CSV={})),function(e){const t=/(?<!\\)(?:\\{2})*'(?:(?<!\\)(?:\\{2})*\\'|[^'])*(?<!\\)(?:\\{2})*'|(?<!\\)(?:\\{2})*"(?:(?<!\\)(?:\\{2})*\\"|[^"])*(?<!\\)(?:\\{2})*"|(\([\S\s]*?(?<!\\)(?:\\\\)*\))/g,n=/(?<!\\)(?:\\{2})*"(?:(?<!\\)(?:\\{2})*\\"|[^"])*(?<!\\)(?:\\{2})*"|'([\S\s]*?(?<!\\)(?:\\\\)*)'/g,r=/(?<!\\)(?:\\{2})*"(?:(?<!\\)(?:\\{2})*\\"|[^"])*(?<!\\)(?:\\{2})*"|([a-zA-Z_$][0-9a-zA-Z_$]*)(?=\s*?:)/g,o=/(?<!\\)(?:\\{2})*"(?:(?<!\\)(?:\\{2})*\\"|[^"])*(?<!\\)(?:\\{2})*"|(,)(?=\s*?[}\]])/g,a=/(?<!\\)(?:\\{2})*"(?:(?<!\\)(?:\\{2})*\\"|[^"])*(?<!\\)(?:\\{2})*"|(?<=[\[,])(\s*?)(?=[,\]])/g,i=/(?<!\\)(?:\\{2})*"(?:(?<!\\)(?:\\{2})*\\"|[^"])*(?<!\\)(?:\\{2})*"|(?<=:)(\s*?)(?=[,}])/g,s=/(?<!\\)(?:\\{2})*"(?:(?<!\\)(?:\\{2})*\\"|[^"])*(?<!\\)(?:\\{2})*"|(\?)/g,c=/(?<!\\)(?:\\{2})*"(?:(?<!\\)(?:\\{2})*\\"|[^"])*(?<!\\)(?:\\{2})*"|(?<=\d)(_)(?=\d)/g;e.parse=function(e,l){return JSON.parse(e.replace(t,(function(e,...t){return t[0]?"":e})).replace(n,(function(e,...t){return void 0===t[0]?e:`"${t[0].replace(/"/g,'\\"').replace(/\\'/g,"'")}"`})).replace(r,(function(e,...t){return t[0]?`"${t[0]}"`:e})).replace(o,(function(e,...t){return t[0]?"":e})).replace(a,(function(e,...t){return void 0===t[0]?e:"null"})).replace(i,(function(e,...t){return void 0===t[0]?e:"null"})).replace(s,(function(e,...t){return t[0]?"null":e})).replace(c,(function(e,...t){return t[0]?"":e})),l)},e.stringify=JSON.stringify}(JSION||(JSION={}));class JSONStreamParser extends TransformStream{constructor({skipErrors:e=!1,parseJSON:t=JSON.parse}={}){let n="",r=!1,o=r=>{try{r.enqueue(t(n.replace(/,\s*$/,"")))}catch(t){e||r.error(t)}n=""};super({transform(e,t){if(!r){if(/^[\s\[]$/.test(e))return;r=!0}n+=e,/(?:\r?\n){2}$/.test(n)&&n.trim()&&o(t),"]"===n.trim()&&t.terminate()},flush(e){n.trim()&&o(e),n=""}})}}class JSONStreamStringifier extends TransformStream{constructor({skipErrors:e=!1,stringifyJSON:t=JSON.stringify,endl:n="\n"}={}){let r,o=!1,a=a=>{try{a.enqueue((o?",":"")+n.repeat(2)+t(r)),o=!0}catch(t){e||a.error(t)}};super({start(e){e.enqueue("[")},transform(e,t){void 0!==r&&a(t),r=e},flush(e){void 0!==r&&a(e),r=void 0,e.enqueue(n.repeat(2)+"]")}})}}!function(e){function t(e,t=0){let n=3735928559^t,r=1103547991^t;for(let t,o=0;o<e.length;o++)t=e.charCodeAt(o),n=Math.imul(n^t,2654435761),r=Math.imul(r^t,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),(r>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}let n,r;function o(e,r,o){if(n.isInvalid(e))throw"Invalid Unicode Noncharacters present in text";"disable sanitizer"!==o&&(e=e.replace(/[<>&"']/g,(e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#x27;";default:throw null}})));const a=new Map;return function e(t,o){for(;t.includes(n.INLINE_MARKER)||t.includes(n.BLOCK_MARKER);)t=t.replace(/([\ufffe\uffff]).*?\1/,(t=>{var n;const i=a.get(t);return o?i.text:(null!==(n=r.get(i.blockType).reviver)&&void 0!==n?n:({blockType:e,groups:t})=>`<${e}>${t.TEXT}</${e}>`)(i,e)}));return t}(function e(r,o){for(const[i,{pattern:s,isInline:c}]of o.entries())r=r.replace(s,((...r)=>{const s=r[0],l=r[r.length-1],u="object"==typeof l?l:void 0,p=(null==c||c)&&n.INLINE_MARKER||n.BLOCK_MARKER,d=`${p}${t(s).split("").map((e=>n.HEXADECIMAL_MAPPING[e])).join("")}${p}`;for(const[t,n]of Object.entries(null!=u?u:{}))t.toUpperCase()===t&&(u[t]=e(n,new Map([...o.entries()].filter((([e])=>e!==i)))));return a.set(d,{blockType:i,text:s,groups:u}),d}));return r}(e,r))}function a(e,t="none",n=!0,a=1){if(e=i(e),"none"!==t){const n=function(){switch(t){case"html":return r.Code.htmlHighlighter();case"css":return r.Code.cssHighlighter();case"javascript":return r.Code.javascriptHighlighter();case"typescript":return r.Code.typescriptHighlighter();case"xml":return r.Code.xmlHighlighter();case"json":return r.Code.jsonHighlighter();case"python":return r.Code.pythonHighlighter();case"diff":return r.Code.diffHighlighter();case"java":return r.Code.javaHighlighter();default:return new Map}}();e=o(e,n)}return n&&(e=e.split("\n").map(((t,n)=>`<span data-code-token="line-number">${(n+a).toString().padStart((e.split("\n").length+a).toString().length," ")}</span><span data-code-token="line" data-code-line="${n+a}">${t}</span>`)).join("\n")),`<span data-code-language="${t}">${e}</span>`}function i(e){return e.replace(/\r(?=\n)/g,"")}e.VERSION=Object.freeze({toString:()=>`${e.VERSION.major}.${e.VERSION.minor}.${e.VERSION.patch}${void 0!==e.VERSION.prerelease?`-${e.VERSION.prerelease}`:""}${void 0!==e.VERSION.metadata?`+${e.VERSION.metadata}`:""}`,major:1,minor:7,patch:0}),function(e){e.NONCHARACTERS=Object.freeze([...function*(){for(let e=0;e<16;e++)yield 65534+65536*e,yield 65535+65536*e;yield 1114110,yield 1114110;for(let e=64976;e<65008;e++)yield e}()].map((e=>String.fromCodePoint(e))));const t=function*(){for(const t of e.NONCHARACTERS)yield t}();function n(){var e;return null!==(e=t.next().value)&&void 0!==e?e:(e=>{throw e})("No more noncharacters")}e.nextNoncharacter=n,e.isInvalid=function(t){return new RegExp(`[${e.NONCHARACTERS.join("")}]`).test(t)},e.INLINE_MARKER=n(),e.BLOCK_MARKER=n(),e.HEXADECIMAL_MAPPING=Object.fromEntries(Array.apply(null,{length:16}).map(((e,t)=>[t.toString(16),n()])))}(n||(n={})),function(n){function r(e=new Map){const t=new Map;function r(e){return new RegExp(String.raw`(${e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")})(?<TEXT>.*?)\1`,"g")}return t.set("escaped",{pattern:/\\(?<what>[^ntp])/g,reviver:({groups:e})=>e.what}),t.set("raw",{pattern:/&lt;&lt;\/(?<text>[\s\S]*?)\/&gt;&gt;/g,reviver:({groups:e})=>e.text}),t.set("src_comment",{pattern:/&lt;!!--(?<text>[\s\S]*?)--&gt;/g,reviver:()=>""}),t.set("comment",{pattern:/&lt;!--(?<text>[\s\S]*?)--&gt;/g,isInline:!0,reviver:({groups:e})=>`\x3c!--${e.text}--\x3e`}),t.set("code",{pattern:/(`)(?<text>.*?)\1/g,reviver:({groups:e},t)=>`<code>${t(e.text,!0)}</code>`}),t.set("symbol",{pattern:/\/(?<what>(&#x27;|&quot;|.).|\?|!)\//g,reviver({groups:e}){var t,r;switch(e.what){case"!":return"&iexcl;";case"?":return"&iquest;";default:return null!==(r=null===(t=n.SYMBOLS[e.what.substring(0,e.what.length-1)])||void 0===t?void 0:t[e.what.substring(e.what.length-1)])&&void 0!==r?r:`/${e.what}/`}}}),t.set("unicode_shortcut",{pattern:/(?<=\b)(?:TM|SS|PG|SM)(?=\b)|\([cCrR]\)|-&gt;|&lt;-/g,reviver({text:e}){switch(e){case"SS":return"&sect;";case"PG":return"&para;";case"SM":return"&#8480;";case"TM":return"&trade;";case"(C)":case"(c)":return"&copy";case"(R)":case"(r)":return"&reg;";case"-&gt;":return"&rarr;";case"&lt;-":return"&larr;";default:return e}}}),t.set("strong",{pattern:/(\*\*)(?=[^*])(?<TEXT>.*?)\1/g}),t.set("em",{pattern:/(\*)(?=[^*])(?<TEXT>.*?)\1/g}),t.set("u",{pattern:r("__")}),t.set("del",{pattern:r("~~")}),t.set("sup",{pattern:r("^^")}),t.set("sub",{pattern:r(",,")}),t.set("mark",{pattern:/(\|\|)(\[(?:color=)?(?<color>[^;]*?)\])?(?<TEXT>.*?)\1/g,reviver:({groups:e})=>`<mark${e.color?` style="background-color:${e.color}"`:""}>${e.TEXT}</mark>`}),t.set("span",{pattern:/(&amp;&amp;)(\[(?:color=)?(?<color>[^;]*?)\])?(?<TEXT>.*?)\1/g,reviver({groups:e}){var t;return`<span style="color:${null!==(t=e.color)&&void 0!==t?t:"red"}">${e.TEXT}</span>`}}),t.set("spoiler",{pattern:/&lt;\?(?<TEXT>.*?)\?&gt;/g,reviver:({groups:e})=>`<span style="filter: blur(0.25em); cursor: pointer;" title="Show spoiler?" onclick="this.removeAttribute('style'); this.removeAttribute('title'); this.removeAttribute('onclick');">${e.TEXT}</span>`}),t.set("custom_token",{pattern:/:(?<what>[a-zA-Z0-9][a-zA-Z0-9_\-]*?):/g,isInline:!0,reviver({groups:t}){var n;return null!==(n=e.get(t.what))&&void 0!==n?n:`:${t.what}:`}}),t.set("nbsp",{pattern:/\\p/g,reviver:()=>"&nbsp;"}),t.set("emsp",{pattern:/\\t/g,reviver:()=>"&emsp;"}),t.set("linebreak",{pattern:/\\n/g,reviver:()=>"<br>"}),t.set("wordbreak",{pattern:/(?<=\S)-\/-(?=\S)/g,reviver:()=>"<wbr>"}),t.set("a",{pattern:/(?<newtab>\+)?\[(?<href>.*?)\]\((?<TEXT>.*?)\)/g,isInline:!0,reviver:({blockType:e,text:t,groups:n})=>`<a href="${/^[^:]*?(?:(?:(?<=mailto|tel|https|http):|\/.*:).*)?$/g.test(n.href)?n.href:"about:blank#blocked"}"${n.newtab?' target="_blank"':""}>${n.TEXT}</a>`}),t.set("autolink",{pattern:/(?<text>(?:(?<protocol>https?:\/\/)|(?<www>www\.))(?<link>\w[\w\-]*(?<=\w)\.\w[\w.\/?&#%=+\-]*(?<=[\w\/])))/g,reviver({groups:e}){var t,n;return`<a href="${null!==(t=e.protocol)&&void 0!==t?t:"https://"}${null!==(n=e.www)&&void 0!==n?n:""}${e.link}">${e.text}</a>`}}),t.set("autolink_email",{pattern:/(?<text>\w[\w.\-]*?@[\w.\-]+\.\w+)/g,reviver:({groups:e})=>`<a href="mailto:${e.text}">${e.text}</a>`}),t.set("html",{pattern:/&lt;(?<what>\/?(?:code|em|i|strong|b|u|del|sub|sup|mark|span|wbr|br))&gt;/g,isInline:!0,reviver:({blockType:e,text:t,groups:n})=>`<${n.what}>`}),t}let o;n.SYMBOLS={"~":{A:"Ã",I:"Ĩ",N:"Ñ",O:"Õ",U:"Ũ",a:"ã",i:"ĩ",n:"ñ",o:"õ",u:"ũ"},":":{A:"Ä",E:"Ë",I:"Ï",O:"Ö",U:"Ü",Y:"Ÿ",a:"ä",e:"ë",i:"ï",o:"ö",u:"ü",y:"ÿ"},"&#x27;":{A:"Á",C:"Ć",E:"É",I:"Í",L:"Ĺ",N:"Ń",O:"Ó",R:"Ŕ",S:"Ś",U:"Ú",Y:"Ý",Z:"Ź",a:"á",c:"ć",e:"é",g:"ǵ",i:"í",l:"ĺ",n:"ń",o:"ó",r:"ŕ",s:"ś",u:"ú",y:"ý",z:"ź"},"&quot;":{O:"Ő",U:"Ű",o:"ő",u:"ű"},"`":{A:"À",E:"È",I:"Ì",O:"Ò",U:"Ù",a:"à",e:"è",i:"ì",o:"ò",u:"ù"},"^":{A:"Â",C:"Ĉ",E:"Ê",G:"Ĝ",H:"Ĥ",I:"Î",J:"Ĵ",O:"Ô",S:"Ŝ",U:"Û",W:"Ŵ",Y:"Ŷ",a:"â",c:"ĉ",e:"ê",g:"ĝ",h:"ĥ",i:"î",j:"ĵ",o:"ô",s:"ŝ",u:"û",w:"ŵ",x:"◯",y:"ŷ"},o:{A:"Å",U:"Ů",a:"å",u:"ů"},"/":{O:"Ø",h:"ℏ",o:"ø"},",":{C:"Ç",G:"Ģ",K:"Ķ",L:"Ļ",N:"Ņ",R:"Ŗ",S:"Ş",T:"Ţ",c:"ç",k:"ķ",l:"ļ",n:"ņ",r:"ŗ",s:"ş",t:"ţ"},"-":{A:"Ā",E:"Ē",I:"Ī",O:"Ō",U:"Ū",a:"ā",e:"ē",i:"ī",o:"ō",u:"ū"},u:{A:"Ă",G:"Ğ",U:"Ŭ",a:"ă",g:"ğ",u:"ŭ"},".":{C:"Ċ",E:"Ė",G:"Ġ",I:"İ",Z:"Ż",c:"ċ",e:"ė",g:"ġ",o:"⊙",s:"⋅",t:"⃛",z:"ż"},"?":{A:"Ą",E:"Ę",I:"Į",U:"Ų",a:"ą",e:"ę",i:"į",u:"ų"},v:{C:"Č",D:"Ď",E:"Ě",L:"Ľ",N:"Ň",R:"Ř",S:"Š",T:"Ť",Z:"Ž",c:"č",d:"ď",e:"ě",l:"ľ",n:"ň",r:"ř",s:"š",t:"ť",z:"ž"},_:{D:"Đ",H:"Ħ",L:"Ł",T:"Ŧ",d:"đ",h:"ħ",l:"ł",t:"ŧ"}},n.unicodeMarkup=function(e=new Map){const t=new Map;function r(e,t,n){return String.fromCharCode(55349,e.charCodeAt(0)+(n.charCodeAt(1)-t.charCodeAt(0)))}function o(e){return new RegExp(String.raw`(${e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")})(?<TEXT>.*?)\1`,"g")}return t.set("escaped",{pattern:/\\(?<what>[^ntp])/g,reviver:({groups:e})=>e.what}),t.set("raw",{pattern:/<<\/(?<text>[\s\S]*?)\/>>/g,reviver:({groups:e})=>e.text}),t.set("code",{pattern:/(`)(?<text>.*?)\1/g,reviver:({groups:e},t)=>t(e.text,!0).replace(/[a-z]/g,(e=>r(e,"a","𝚊"))).replace(/[A-Z]/g,(e=>r(e,"A","𝙰"))).replace(/\d/g,(e=>r(e,"1","𝟷")))}),t.set("symbol",{pattern:/\/(?<what>('|"|.).|\?|!)\//g,reviver({groups:e}){var t,r;switch(e.what=e.what.replace('"',"&quot;").replace("'","&#x27;"),e.what){case"!":return"¡";case"?":return"¿";default:return null!==(r=null===(t=n.SYMBOLS[e.what.substring(0,e.what.length-1)])||void 0===t?void 0:t[e.what.substring(e.what.length-1)])&&void 0!==r?r:`/${e.what}/`}}}),t.set("unicode_shortcut",{pattern:/(?<=\b)(?:TM|SS|PG|SM)(?=\b)|\([cCrR]\)|-&gt;|&lt;-/g,reviver({text:e}){switch(e){case"SS":return"§";case"PG":return"¶";case"SM":return"℠";case"TM":return"™";case"(C)":case"(c)":return"©";case"(R)":case"(r)":return"®";case"->;":return"→";case"<-":return"←";default:return e}}}),t.set("em_strong",{pattern:/(\*\*\*)(?=[^*])(?<TEXT>.*?)\1/g,reviver:({groups:e},t)=>t(e.TEXT).replace(/[a-z]/g,(e=>r(e,"a","𝙖"))).replace(/[A-Z]/g,(e=>r(e,"A","𝘼"))).replace(/\d/g,(e=>r(e,"1","𝟭")))}),t.set("strong",{pattern:/(\*\*)(?=[^*])(?<TEXT>.*?)\1/g,reviver:({groups:e},t)=>t(e.TEXT).replace(/[a-z]/g,(e=>r(e,"a","𝗮"))).replace(/[A-Z]/g,(e=>r(e,"A","𝗔"))).replace(/\d/g,(e=>r(e,"1","𝟭")))}),t.set("em",{pattern:/(\*)(?=[^*])(?<TEXT>.*?)\1/g,reviver:({groups:e},t)=>t(e.TEXT).replace(/[a-z]/g,(e=>r(e,"a","𝘢"))).replace(/[A-Z]/g,(e=>r(e,"A","𝘈")))}),t.set("u",{pattern:o("__"),reviver:({groups:e},t)=>t(e.TEXT).replace(/\uD835.|[a-z0-9]/gi,(e=>e+String.fromCharCode(8288,"a͟".charCodeAt(1))))}),t.set("del",{pattern:o("~~"),reviver:({groups:e},t)=>t(e.TEXT).replace(/\uD835.|[a-z0-9]/gi,(e=>e+String.fromCharCode(8288,"a̶".charCodeAt(1))))}),t.set("custom_token",{pattern:/:(?<what>[a-zA-Z0-9][a-zA-Z0-9_\-]*?):/g,isInline:!0,reviver({groups:t}){var n;return null!==(n=e.get(t.what))&&void 0!==n?n:`:${t.what}:`}}),t.set("nbsp",{pattern:/\\p/g,reviver:()=>String.fromCharCode(160)}),t.set("emsp",{pattern:/\\t/g,reviver:()=>String.fromCharCode(8195)}),t.set("linebreak",{pattern:/\\n/g,reviver:()=>"\n"}),t},n.inlineMarkup=r,n.blockMarkup=function(n=new Map,o=new Map,a=new Set){const i=new Map,s=r(n);i.set("escaped",s.get("escaped")),i.set("raw",s.get("raw")),i.set("src_comment",s.get("src_comment")),i.set("comment",s.get("comment")),i.set("code_block",{pattern:/(```+)(?<lines>#)?(?<language>[a-z]+)?(?<text>[\s\S]*?)\1/g,isInline:!1,reviver({groups:t},n){var r;return`<pre><code>${t.language||t.lines?e.parseCode(n(t.text,!0).replace(/&lt;|&gt;|&amp;|&quot;|&#x27;/g,(e=>{switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return'"';case"&#x27;":return"'";default:throw null}})).trim(),null!==(r=t.language)&&void 0!==r?r:"none","#"===t.lines):n(t.text,!0).trim()}</code></pre>`}}),i.set("property",{pattern:/^[\t ]*?![\t ]*?(?<key>[a-zA-Z_][a-zA-Z_0-9]*?)(?<!http|https):(?<value>.*?)$/gm,isInline:!1,reviver:({groups:e})=>(o.set(e.key,e.value.trim()),"")}),i.set("template",{pattern:/\${(?<key>[a-zA-Z_][a-zA-Z_0-9]*?)\}/g,isInline:!0,reviver({groups:e}){var t;return null!==(t=o.get(e.key))&&void 0!==t?t:`\${${e.key}}`}}),i.set("image",{pattern:/!\[(?<src>\S*?)(?:[\t ]*?(?<height>auto|\d*)(?:[xX](?<width>auto|\d*))?)?\](?:\((?<alt>.*?)\))?/g,reviver({groups:e}){var t;return null!==(t=e.width)&&void 0!==t||(e.width=e.height),`<img src="${e.src}"${e.alt?` alt="${e.alt}"`:""}${e.height?` height="${e.height}"`:""}${e.width?` width="${e.width}"`:""}>`}});for(const e of s.entries())i.has(e[0])||i.set(...e);return i.set("details",{pattern:/(?<=\n|^)[\t ]*!(?<mode>[vV]|&gt;)?!(?<summary>.*?)\[\s*(?<DETAILS>[\s\S]*?)\s*(?<!\])\](?!\])/g,isInline:!1,reviver({groups:e}){var t,n;return`<details${"v"===(null===(n=null===(t=e.mode)||void 0===t?void 0:t.toLowerCase)||void 0===n?void 0:n.call(t))?" open":""}><summary>${e.summary}</summary>\n${e.DETAILS}</details>`}}),i.set("text-align",{pattern:/(?<=\n|^)[^\S\n]*?@@\s*?(?<what>center(?:ed)?|left|right|justif(?:y|ied)(?:-all)?)\s*?(?<TEXT>[\s\S]*?)(?:$|(?:(?<=\n)[^\S\n]*?@@[\t ]*?reset)|(?=\n[^\S\n]*?@@[\t ]*?(?:center(?:ed)?|left|right|justif(?:y|ied)(?:-all)?)))/g,isInline:!1,reviver({groups:e}){var t;return`<div style="text-align: ${null!==(t={centered:"center",justified:"justify","justified-all":"justify-all"}[e.what])&&void 0!==t?t:e.what};">${e.TEXT}</div>`}}),i.set("numbered_header",{pattern:/^[\t ]*?(?<count>#{1,6})(?:\[(?<id>[a-zA-Z_][a-zA-Z_0-9]*?)\])?[\t ]?(?<TEXT>[^\uffff]*?)\k<count>?(?=\n|$)/gm,isInline:!1,reviver({groups:e}){var n;return e.id&&a.add(`h${e.count.length}:${e.id}`),null!==(n=e.id)&&void 0!==n||(e.id=t(e.TEXT)),`<h${e.count.length} id="h${e.count.length}:${e.id}"><a href="#h${e.count.length}:${e.id}" title="Link to section">${e.TEXT}</a></h${e.count.length}>`}}),i.set("hr",{pattern:/^[\t ]*([-=])\1{2,}[\t ]*$/gm,isInline:!1,reviver:()=>"<hr>"}),i.set("table",{pattern:/\[\[(?:\n\s*(?:title=)?(?<title>[^,\n]*)\n)?(?<contents>[\s\S]*?)\]\]/g,isInline:!1,reviver({groups:e}){const t=e.contents.trim().split("\n").map(((e,t)=>`\n<tr>${e.split(",").map((e=>`<t${t?"d":"h"}>${e.trim()}</t${t?"d":"h"}>`)).join("")}</tr>`));return`<table>${e.title?`\n<caption>${e.title.trim()}</caption>`:""}\n<thead>${t.shift()}\n<thead>\n<tbody>${t.join("")}\n<tbody>\n</table>`}}),i.set("list",{pattern:/(?<text>(?<=\n|^)[\t ]*?(?:\+|\d+[.)])[\s\S]*?(?=\n\n|$))/g,isInline:!1,reviver({groups:e}){var t;const n=[];let r=null,o=0,a="";function i(e){a+=`<${e}>`,n.push(e)}function s(){a+=`</${n.pop()}>`}for(const n of e.text.trim().split("\n")){const e=null===(t=n.match(/(?<whitespace>\s*?)(?<what>\+|\d+[.)])(?:\s*)(?<text>.*)/))||void 0===t?void 0:t.groups;if(!e){a=a.replace(/(<\/..\>)$/,"<br>"+n.trim()+"$1");continue}const c="+"===e.what?"ul":"ol";null==r||e.whitespace.length>o?i(c):e.whitespace.length<o?s():c!==r&&(s(),i(c)),a+=`<li>${e.text}</li>`,[r,o]=[c,e.whitespace.length]}for(;n.length;)s();return a}}),i.set("blockquote",{pattern:/(?<text>(?:(?:&gt;){3}[\s\S]*?(?:-[\t ]*?(?<citation>.*?))?(?:\n|$))+)/g,isInline:!1,reviver({groups:e}){var t;return`<figure><blockquote>${e.text.replace(/(?:&gt;){3}/g,"").replace(new RegExp(String.raw`-\s*?${null===(t=e.citation)||void 0===t?void 0:t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}\s*?$`),"")}</blockquote>${e.citation&&`<figcaption><cite>- ${e.citation}</cite></figcaption>`||""}</figure>`}}),i.set("block_html",{pattern:/&lt;(?<what>\/?(?:h[123456]|hr|blockquote|ul|ol|li))&gt;/g,isInline:!1,reviver:({groups:e})=>`<${e.what}>`}),i.set("text",{pattern:/(?<=\n)\n?(?<TEXT>[^\uffff]+?)(?=  \s*?\n|\n\n|\uffff|$)/g,isInline:!1,reviver:({blockType:e,text:t,groups:n})=>n.TEXT.trim()?`<p>${n.TEXT.trim()}</p>\n`:""}),i},function(e){function t(e,t,n){n.set(e,{pattern:t,reviver:({groups:t})=>`<span data-code-token="${e}">${t.text}</span>`})}function n(){const e=new Map;function t(e){return e.replace(/&lt;|&gt;|&amp;|&quot;|&#x27;/g,(e=>{switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return'"';case"&#x27;":return"'";default:throw null}}))}return e.set("comment",{pattern:/(?<text>(?:&lt;!--[\s\S]*?--&gt;))/g,reviver:({groups:e},t)=>`<span data-code-token="comment">${t(e.text).replace(/<span data-code-token="string">|<\/span>/g,"")}</span>`}),e.set("doctype",{pattern:/^(?<whitespace>\s*)(?<text>&lt;!DOCTYPE\b.*?&gt;)/i,reviver:({groups:e})=>`${e.whitespace||""}<span data-code-token="doctype">${e.text}</span>`}),e.set("style",{pattern:/(?<OPENTAG>&lt;style\b.*?&gt;)(?<content>[\s\S]*?)(?<CLOSETAG>&lt;\/style&gt;)/g,reviver:({groups:e},n)=>e.OPENTAG+a(t(n(e.content)),"css",!1)+e.CLOSETAG}),e.set("script",{pattern:/(?<OPENTAG>&lt;script\b.*?&gt;)(?<content>[\s\S]*?)(?<CLOSETAG>&lt;\/script&gt;)/g,reviver:({groups:e},n)=>e.OPENTAG+a(t(n(e.content)),"javascript",!1)+e.CLOSETAG}),e.set("tag-open",{pattern:/(?<name>&lt;[a-z\-0-9]+)(?<DATA>[^\uffff\ufffe]*?)(?<close>\/?&gt;)/gi,reviver({groups:e}){var t;return`<span data-code-token="tag">${e.name}</span>${null!==(t=e.DATA)&&void 0!==t?t:""}<span data-code-token="tag">${e.close}</span>`}}),e.set("string",{pattern:/(?<front>=\s*?)(?<text>(?<what>&quot;|&#x27;)(?:.*?[^\\\n])?(?:\\\\)*\k<what>)/g,reviver:({groups:e})=>e.front+`<span data-code-token="string">${e.text}</span>`}),e.set("tag-close",{pattern:/(?<text>&lt;\/[a-z\-0-9]+\s*?&gt;)/gi,reviver:({groups:e})=>`<span data-code-token="tag">${e.text}</span>`}),e}e.SUPPORTED_LANGUAGES=["html","css","javascript","typescript","xml","json","python","diff","java","none"],e.htmlHighlighter=n;const r=["charset","color-profile ","counter-style","document ","font-face","font-feature-values","import","keyframes","media","namespace","page","property ","supports","viewport","color-profile","document","layer","property","scroll-timeline","swash","ornaments","annotation","stylistic","styleset","character-variant"];e.cssHighlighter=function(){const e=new Map,n=(n,r)=>t(n,r,e);return n("string",/(?<text>(?<what>&quot;|&#x27;)(?:.*?[^\\\n])?(?:\\\\)*\k<what>)/g),e.set("comment",{pattern:/(?<text>(?:\/\*[\s\S]*?\*\/))/g,reviver:({groups:e},t)=>`<span data-code-token="comment">${t(e.text).replace(/<span data-code-token="string">|<\/span>/g,"")}</span>`}),n("keyword",new RegExp(String.raw`(?<text>@(?:${r.join("|")})\b)`,"g")),n("selector",/(?<text>[^\s{};\uffff\ufffe][^{};\uffff\ufffe]*?[^\s{};\uffff\ufffe]?(?=\s*{))/g),n("property",/(?<text>\b[a-z\-]+:)/g),n("hexadecimal",/(?<text>#(?:(?:[0-9a-f]){8}|(?:[0-9a-f]){6}|(?:[0-9a-f]){3,4})\b)/gi),n("number",/(?<text>\b(\d[\d_]*\.?[\d_]*((?<=[\d.])e[+\-]?\d[\d_]*)?n?(?<!_))(?:%|\b|[a-z]+))/gi),n("function",/(?<text>\b[a-z\-]+\b(?=\())/g),n("other",/(?<text>\b[a-z\-]+\b)/g),e};const o=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","implements","interface","let","package","private","protected","public","static","yield","await","null","true","false","abstract","boolean","byte","char","double","final","float","goto","int","long","native","short","synchronized","throws","transient","volatile","of","eval"];e.javascriptHighlighter=function(){return s(o)};const i=["enum","as","asserts","any","async","constructor","declare","get","infer","intrinsic","is","keyof","module","namespace","never","readonly","require","number","object","set","string","symbol","type","undefined","unique","unknown","from","global","bigint","override"];function s(e){const n=new Map,r=(e,r)=>t(e,r,n);return n.set("multiline-string",{pattern:/(?<text>(?<what>`)(?:[^\uffff\ufffe]*?[^\\])?(?:\\\\)*\k<what>)/g,reviver:({groups:e})=>`<span data-code-token="string">${e.text}</span>`}),r("string",/(?<text>(?<what>&quot;|&#x27;)(?:.*?[^\\\n])?(?:\\\\)*\k<what>)/g),n.set("comment",{pattern:/(?<text>(?:\/\/.*)|(?:\/\*[\s\S]*?\*\/))/g,reviver:({groups:e},t)=>`<span data-code-token="comment">${t(e.text).replace(/<span data-code-token="string">|<\/span>/g,"")}</span>`}),r("number",/(?<text>\b(?:Infinity|NaN|0(?:[xX][0-9a-fA-F][0-9a-fA-F_]*|[bB][01][01_]*|[oO][0-7][0-7_]*)(?<!_)|\d[\d_]*\.?[\d_]*((?<=[\d.])[eE][+\-]?\d[\d_]*)?n?(?<!_))\b)/g),r("keyword",new RegExp(String.raw`(?<text>\b(?:${e.join("|")})\b)`,"g")),n}e.typescriptHighlighter=function(){return s([...o,...i])},e.ecmascriptHighlighter=s,e.xmlHighlighter=function(){const e=new Map,t=n(),r=n=>e.set(n,t.get(n));return r("comment"),e.set("processing-instruction",{pattern:/(?<name>&lt;\?[a-z0-9\-]+)(?<DATA>\b.*?)(?<close>\?&gt;)/gi,reviver:({groups:e})=>`<span data-code-token="processing-instruction">${e.name}</span>${e.DATA}<span data-code-token="processing-instruction">${e.close}</span>`}),e.set("cdata",{pattern:/(?<open>&lt;!\[CDATA\[)(?<content>[\s\S]*?)(?<close>\]\]&gt;)/g,reviver:({groups:e})=>`<span data-code-token="cdata">${e.open}</span><span data-code-token="cdata-content">${e.content}</span><span data-code-token="cdata">${e.close}</span>`}),e.set("tag-open",{pattern:/(?<name>&lt;[a-z\-0-9]+(?:\:[a-z\-0-9]+)?)(?<DATA>[^\uffff\ufffe]*?)(?<close>\/?&gt;)/gi,reviver({groups:e}){var t;return`<span data-code-token="tag">${e.name}</span>${null!==(t=e.DATA)&&void 0!==t?t:""}<span data-code-token="tag">${e.close}</span>`}}),r("string"),e.set("tag-close",{pattern:/(?<text>&lt;\/[a-z\-0-9]+(?:\:[a-z\-0-9]+)?\s*?&gt;)/gi,reviver:({groups:e})=>`<span data-code-token="tag">${e.text}</span>`}),e},e.jsonHighlighter=function(){const e=new Map,n=(n,r)=>t(n,r,e);return n("string",/(?<text>(?<what>&quot;|&#x27;)(?:.*?[^\\\n])?(?:\\\\)*\k<what>)/g),n("number",/(?<text>-?\b\d+(\.\d+)?(e[+\-]?\d+)?\b)/gi),n("keyword",/(?<text>\b(?:true|false|null)\b)/g),e};const c=["and","as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","nonlocal","not","or","pass","raise","return","try","while","with","yield"];e.pythonHighlighter=function(){const e=new Map,n=(n,r)=>t(n,r,e);return e.set("multiline-string",{pattern:/(?<text>(?<what>(?<qtype>&quot;|&#x27;)\k<qtype>{2})(?:[^\uffff\ufffe]*?[^\\])?(?:\\\\)*\k<what>)/g,reviver:({groups:e})=>`<span data-code-token="string">${e.text}</span>`}),n("string",/(?<text>(?<what>&quot;|&#x27;)(?:.*?[^\\\n])?(?:\\\\)*\k<what>)/g),e.set("comment",{pattern:/(?<text>(?:#.*))/g,reviver:({groups:e},t)=>`<span data-code-token="comment">${t(e.text).replace(/<span data-code-token="string">|<\/span>/g,"")}</span>`}),n("number",/(?<text>\b(?:0(?:[xX][0-9a-fA-F][0-9a-fA-F_]*|[bB][01][01_]*|[oO][0-7][0-7_]*)(?<!_)|\d[\d_]*\.?[\d_]*((?<=[\d.])[eE][+\-]?\d[\d_]*)?j?(?<!_))\b)/g),n("value",/(?<text>\b(?:True|False|None)\b)/g),n("keyword",new RegExp(String.raw`(?<text>\b(?:${c.join("|")})\b)`,"g")),e},e.diffHighlighter=function(){const e=new Map;return e.set("heading",{pattern:/^(?<range>@@ -\d+,\d+ \+\d+,\d+ @@)(?<heading> .*)?$/gm,reviver:({groups:e})=>`<span data-code-token="range">${e.range}</span>`+(e.heading?`<span data-code-token="heading">${e.heading}</span>`:"")}),e.set("insertion",{pattern:/^(?<text>\+.*)$/gm,reviver:({groups:e})=>`<span data-code-token="insertion"><ins>${e.text}</ins></span>`}),e.set("deletion",{pattern:/^(?<text>-.*)$/gm,reviver:({groups:e})=>`<span data-code-token="deletion"><del>${e.text}</del></span>`}),e},e.javaHighlighter=function(){const e=new Map,n=(n,r)=>t(n,r,e);return e.set("multiline-string",{pattern:/(?<text>(?<what>(?<qtype>&quot;){3})(?:[^\uffff\ufffe]*?[^\\])?(?:\\\\)*\k<what>)/g,reviver:({groups:e})=>`<span data-code-token="string">${e.text}</span>`}),n("string",/(?<text>(?<what>&quot;|&#x27;)(?:.*?[^\\\n])?(?:\\\\)*\k<what>)/g),e.set("comment",{pattern:/(?<text>(?:\/\/.*)|(?:\/\*[\s\S]*?\*\/))/g,reviver:({groups:e},t)=>`<span data-code-token="comment">${t(e.text).replace(/<span data-code-token="string">|<\/span>/g,"")}</span>`}),n("number",/(?<text>\b(?:0(?:x[0-9a-f][0-9a-f_]*|b[01][01_]*)(?<!_)|\d[\d_]*\.?[\d_]*((?<=[\d.])e[+\-]?\d[\d_]*)?[dfl]?(?<!_))\b)/gi),n("keyword",new RegExp(String.raw`(?<text>\b(?:${["abstract","continue","for","new","switch","assert","default","goto","package","synchronized","boolean","do","if","private","this","break","double","implements","protected","throw","byte","else","import","public","throws","case","enum","instanceof","return","transient","catch","extends","int","short","try","char","final","interface","static","void","class","finally","long","strictfp","volatile","const","float","native","super","while","try","false","null","var"].join("|")})\b)`,"g")),n("annotation",/(?<text>@[a-zA-Z_$][a-zA-Z_$0-9]*)\b/g),e}}(o=n.Code||(n.Code={}))}(r||(r={})),e.parseUnicodeMarkup=function(e,t){return o(i(e),r.unicodeMarkup(t),"disable sanitizer")},e.parseInlineMarkup=function(e,t){return o(i(e),r.inlineMarkup(t))},e.parseMarkup=function(e,t,n){var a;const s=new Map(null!==(a=null==n?void 0:n.entries())&&void 0!==a?a:[]),c=new Set,l=new String(o(i(e),r.blockMarkup(t,s,c)));return Object.defineProperty(l,"properties",{value:s}),Object.defineProperty(l,"ids",{value:c}),l},e.parseCode=a}(SHML||(SHML={})),function(e){const t=Object.freeze(document.currentScript?Object.fromEntries([...new URLSearchParams(Object.assign(document.createElement("a"),{href:document.currentScript.getAttribute("src")}).search).entries()].map((([e,t])=>[e,"false"!==t&&t]))):{debug:!0});function n(e,...t){return t.reduce(((t,n,r)=>t+n+e[r+1]),e[0])}let r,o,a;function i(e,t){var n,r,o;let a;return null!==(r=null===(n=t.closest)||void 0===n?void 0:n.call(t,e))&&void 0!==r?r:(a=t.getRootNode()).host?i(e,a.host):(null===(o=a.defaultView)||void 0===o?void 0:o.frameElement)?i(e,a.defaultView.frameElement):null}function s(e){return Array.isArray(e)}e.VERSION=Object.freeze({toString:()=>`${e.VERSION.major}.${e.VERSION.minor}.${e.VERSION.patch}${void 0!==e.VERSION.prerelease?`-${e.VERSION.prerelease}`:""}${void 0!==e.VERSION.metadata?`+${e.VERSION.metadata}`:""}`,major:2,minor:2,patch:2}),e.$it=void 0,Object.defineProperty(e,"$it",{enumerable:!0,configurable:!!t.debug,get:()=>r}),e.$$it=void 0,Object.defineProperty(e,"$$it",{enumerable:!0,configurable:!!t.debug,get:()=>o}),e.$xit=void 0,Object.defineProperty(e,"$xit",{enumerable:!0,configurable:!!t.debug,get:()=>a}),e.$=function(e,t=document){var o,a,c;s(e)&&(e=n(e,...[...arguments].slice(1)),t=document);let{deep:u,count:p,cssSelector:d}=e.match(/^(?<deep>%)?(?:\^(?<count>\d*))? ?(?<cssSelector>[\s\S]*)$/).groups;if(void 0!==p){if(NaN===(p=+(p||"1"))||!(t instanceof Element))return null;let e=t;for(let t=0;t<p&&(null==e?void 0:e.parentElement);t++)e=u?i(d||":scope",null==e?void 0:e.parentElement):null!==(c=null===(a=null===(o=null==e?void 0:e.parentElement)||void 0===o?void 0:o.closest)||void 0===a?void 0:a.call(o,d||":scope"))&&void 0!==c?c:null;return r=e}return r=u?l(d,t):t.querySelector(d)};for(const r of[ShadowRoot,Element,Document,DocumentFragment])Object.defineProperty(r.prototype,"$self",{enumerable:!1,configurable:!!t.debug,value:function(t){return s(t)&&(t=n(t,...[...arguments].slice(1))),e.$(t,this)}});function c(e,t=document){var n;const r=[];if(t.childElementCount){const n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT);let o;for(;o=n.nextNode();)o instanceof Element&&o.matches(e)&&r.push(o),o instanceof Element&&o.shadowRoot?r.push(...c(e,o.shadowRoot)):o instanceof HTMLIFrameElement&&o.contentWindow&&r.push(...c(e,o.contentWindow.document))}else t instanceof HTMLIFrameElement&&(null===(n=t.contentWindow)||void 0===n?void 0:n.document)?r.push(...c(e,t.contentWindow.document)):t instanceof Element&&t.shadowRoot&&r.push(...c(e,t.shadowRoot));return r}function l(e,t=document){var n;let r;if(t.childElementCount){const n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT);let o;for(;o=n.nextNode();){if(o instanceof Element&&o.matches(e))return o;if(o instanceof Element&&o.shadowRoot){if(r=l(e,o.shadowRoot))return r}else if(o instanceof HTMLIFrameElement&&o.contentWindow&&(r=l(e,o.contentWindow.document)))return r}}else if(t instanceof HTMLIFrameElement&&(null===(n=t.contentWindow)||void 0===n?void 0:n.document)){if(r=l(e,t.contentWindow.document))return r}else if(t instanceof Element&&t.shadowRoot&&(r=l(e,t.shadowRoot)))return r;return null}e.$$=function(e,t=document){s(e)&&(e=n(e,...[...arguments].slice(1)),t=document);let{deep:r,cssSelector:a}=e.match(/^(?<deep>%)? ?(?<cssSelector>[\s\S]*)$/).groups;return o=u(void 0!==r?c(a,t):t.querySelectorAll(a))};for(const r of[ShadowRoot,Element,Document,DocumentFragment])Object.defineProperty(r.prototype,"$$self",{enumerable:!1,configurable:!!t.debug,value:function(t){return s(t)&&(t=n(t,...[...arguments].slice(1))),e.$$(t,this)}});e.$x=function(e,t=document){s(e)&&(e=n(e,...[...arguments].slice(1)),t=document);const r=document.evaluate(e,t,null,XPathResult.ANY_TYPE,null);try{switch(r.resultType){case 1:return r.numberValue;case 2:return r.stringValue;case 3:return r.booleanValue;case 4:case 5:{let e,t=[];for(;e=r.iterateNext();)t.push(e);return u(t)}case 6:case 7:return u(Array.apply(null,{length:r.snapshotLength}).map(((e,t)=>r.snapshotItem(t))));case 8:case 9:return r.singleNodeValue;default:return null}}catch(e){return null}};for(const r of[ShadowRoot,Element,Document,DocumentFragment])Object.defineProperty(r.prototype,"$xself",{enumerable:!1,configurable:!!t.debug,value:function(t){return s(t)&&(t=n(t,...[...arguments].slice(1))),e.$x(t,this)}});function u(e){return new Proxy([...e],{set:(e,t,n)=>"symbol"==typeof t?Reflect.set(e,t,n):t.startsWith("$")?Reflect.set(e,t.substring(1),n):e.every((e=>Reflect.set(e,t,n instanceof d?n.value():n))),get(e,t,n){if("symbol"==typeof t){const n=[...e],r=Reflect.get(n,t);return"function"==typeof r?r.bind(n):r}if("$toArray"===t)return function(){return[...e]};if("$any"===t)return e.length>0;if(t.startsWith("$")){const n=Reflect.get([...e],t.substring(1));return"function"==typeof n?function(){const t=n.bind([...e])(...arguments);return Array.isArray(t)?u(t):t}:Array.isArray(n)?u(n):n}return e.length<=0?void 0:e.some((e=>"function"==typeof Reflect.get(e,t)))?function(){return u(e.map((e=>{const n=Reflect.get(e,t);return"function"==typeof n?n.bind(e)(...[...arguments].map((e=>e instanceof d?e.value():e))):n})))}:u(e.map((e=>Reflect.get(e,t))))},deleteProperty:(e,t)=>"symbol"==typeof t?Reflect.deleteProperty(e,t):/^\$\d+/.test(t)?Reflect.deleteProperty(e,t.substring(1)):!t.startsWith("$")&&e.every((e=>Reflect.deleteProperty(e,t))),has:(e,t)=>"symbol"==typeof t?Reflect.has(e,t):/^\$\d+/.test(t)?Reflect.has(e,t.substring(1)):!t.startsWith("$")&&e.every((e=>Reflect.has(e,t)))})}function p(e){const t=()=>[...e.childNodes].filter((e=>{var t,n;return!(e instanceof Text)||""!==e.wholeText.trim()||e.parentElement instanceof HTMLPreElement||(null===(n=null===(t=e.parentElement)||void 0===t?void 0:t.closest)||void 0===n?void 0:n.call(t,"pre"))})),n=["push","pop","shift","unshift","splice","reverse","sort"];return new Proxy([...e.childNodes],{get:(r,o)=>n.includes(o)?function(){const n=t();try{return n[o](...arguments)}finally{e.replaceChildren(...n)}}:r[o],set(n,r,o,a){if(+r>-1){if(o instanceof Node){const n=t();return n[+r]=o,e.replaceChildren(...n),!0}return!1}return Reflect.set(n,r,o,a)}})}for(const e of[ShadowRoot,Element,Document,DocumentFragment])Object.defineProperty(e.prototype,"$children",{enumerable:!1,configurable:!!t.debug,get(){return p(this)},set(e){return this.replaceChildren(...e)}});e.HTMLNode=function(e,t,...n){const r=document.createElement(e);if("string"==typeof t)r.textContent=t;else{t instanceof Map||(t=new Map(Object.entries(null!=t?t:{})));for(const[e,n]of t.entries())if("children"===e&&Array.isArray(n))r.replaceChildren(...r.childNodes,...n);else if("style"===e&&"object"==typeof n)for(const[e,t]of n instanceof Map?n.entries():Object.entries(n))Reflect.set(r.style,e,t);else"classList"===e||"classlist"===e&&Array.isArray(n)?r.classList.add(...n):e in r?Reflect.set(r,e,n):r.setAttribute(e,n);n.length&&r.replaceChildren(...r.childNodes,...n)}return r},e.HtmlNode=e.HTMLNode,e.SVGNode=function(e,t,...n){const r=document.createElementNS("http://www.w3.org/2000/svg",e);"svg"===e&&r.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof Map||(t=new Map(Object.entries(null!=t?t:{})));for(const[e,n]of t.entries())if("children"===e&&Array.isArray(n))r.replaceChildren(...r.childNodes,...n);else if("style"===e&&"object"==typeof n)for(const[e,t]of n instanceof Map?n.entries():Object.entries(n))Reflect.set(r.style,e,t);else"classList"===e||"classlist"===e&&Array.isArray(n)?r.classList.add(...n):e in r&&"function"==typeof n?Reflect.set(r,e,n):r.setAttribute(e,n);return n.length&&r.replaceChildren(...r.childNodes,...n),r},e.SvgNode=e.SVGNode,e.MATHMLNode=function(e,t,...n){throw"MathML node has not been implemented yet."},e.MathMlNode=e.MATHMLNode,e.TextNode=function(e=""){return document.createTextNode(e)},e.CommentNode=function(e=""){return document.createComment(e)},e.$host=void 0,Object.defineProperty(e,"$host",{get(){var e,t;return null!==(t=null===(e=document.currentScript)||void 0===e?void 0:e.parentElement)&&void 0!==t?t:null}}),[ShadowRoot,Element,Document,DocumentFragment].forEach((e=>Object.defineProperty(e.prototype,"$host",{enumerable:!1,configurable:!!t.debug,get(){return this}}))),e.$last=void 0;{let n;const r=new MutationObserver((e=>e.forEach((e=>{const t=[...e.addedNodes].pop();t instanceof HTMLElement&&!(t instanceof HTMLScriptElement)&&(n=t)}))));r.observe(document.documentElement,{childList:!0,subtree:!0}),window.addEventListener("load",(()=>{r.disconnect(),n=null})),Object.defineProperty(e,"$last",{enumerable:!0,configurable:!!t.debug,get:()=>n})}e.$ctx=void 0,Object.defineProperty(e,"$ctx",{get:()=>document.currentScript,set(e){var t,n;null===(n=null===(t=document.currentScript)||void 0===t?void 0:t.replaceWith)||void 0===n||n.call(t,e)}}),[ShadowRoot,Element,Document,DocumentFragment].forEach((e=>Object.defineProperty(e.prototype,"$ctx",{enumerable:!1,configurable:!!t.debug,get(){return this},set(e){this.replaceWith(e)}})));class d{constructor(e){this.value=e}get[Symbol.toStringTag](){return"Box"}}if(e.BoxedNode=class extends d{constructor(e){super((()=>e.cloneNode(!0)))}},Object.defineProperty(EventTarget.prototype,"$on",{value(e,t,n){return this.addEventListener(e,t,n),{detach:()=>this.removeEventListener(e,t,n)}},enumerable:!1,configurable:!!t.debug}),document.currentScript&&"bind"in t){f(Reflect.get(globalThis,(t.bind||"globalThis").toString()))}function f(t){Object.getOwnPropertyNames(e).forEach((function(n){"VERSION"!==n&&Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}e.bind=f}(DomLib||(DomLib={})),DomLib.bind(globalThis),Object.defineProperty(globalThis,"kitsunecore",{value:!0});